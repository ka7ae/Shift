{% extends 'base.html' %}

{% block content %}
{% if user.is_authenticated %}

<div id = "currentuserId">{{user.account_id}}</div>

<div id="month">
    <button id="prevMonth">＜</button>
    <span id="currentYearMonth"></span>
    <button id="nextMonth">＞</button>
</div>
<br>

<div id="shiftTable"></div>

<div id="shiftSelectModal" style="display: none;">
    <h3 id="modalSelectDate"></h3>
    <label for="shiftSelectInput"></label>
    <!-- <input type="text" id="shiftSelectInput"> -->
    <br>
    <ul>
        <li>
            <input type="radio" id="lunchShift" name="shiftType" value="Lunch">
            <label for="lunchShift" class="label">ランチ:△</label>
        </li>
        <li>
            <input type="radio" id="dinnerShift" name="shiftType" value="Dinner">
            <label for="dinnerShift" class="label">ディナー:○</label>
        </li>
        <li>
            <input type="radio" id="orShift" name="shiftType" value="Or">
            <label for="orShift" class="label">どっちでも:☆</label>
        </li>
        <li>
            <input type="radio" id="fullShift" name="shiftType" value="Full">
            <label for="fullShift" class="label">オーラス:◎</label>
        </li>
        <li>
            <input type="radio" id="NoShift" name="shiftType" value="No">
            <label for="NoShift" class="label">休み:×</label>
        </li>
    </ul>
    
    <button id="cancelSelectShift">×</button>
    <button id="confirmShiftChange">シフトを変更</button>
    
</div>



<!-- <div id="shiftInfoContainer"></div> -->

<script>

    function getCookie(name) {
       let cookieValue = null;
       if (document.cookie && document.cookie !== '') {
           const cookies = document.cookie.split(';');
           for (let i = 0; i < cookies.length; i++) {
               const cookie = cookies[i].trim();
               if (cookie.substring(0, name.length + 1) === (name + '=')) {
                   cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                   break;
               }
           }
       }
       return cookieValue;
   }

   const csrfToken = getCookie('csrftoken');
   // const shifts = JSON.parse('{{ shifts|safe }}');
   const shiftData = JSON.parse('{{ shift_data|escapejs }}');
   shifts = shiftData; 

</script>


<script src="../../static/js/table.js"> </script>


{% endif %}
{% endblock content %}